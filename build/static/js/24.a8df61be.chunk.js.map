{"version":3,"sources":["features/Settings/settings.js","features/Settings/components/ChangePassword.jsx","features/Settings/components/SettingsAccount.jsx"],"names":["require","server_name","token_prefix","updateTutorProfile","a","newTutorInfo","token","id","fetch","method","headers","Authorization","body","JSON","stringify","console","log","updateParentProfile","updateLink","newLink","getName","name","first_name","slice","indexOf","last_name","changePassword","oldPassword","newPassword","ChangePassword","onClose","onSubmit","useForm","register","errors","formState","handleSubmit","watch","newpassword","useRef","current","className","onClick","oldpassword","style","fontWeight","padding","width","type","required","minLength","validate","value","renewpassword","SettingsAccount","props","userName","useSelector","selectUsername","email","selectEmail","useState","showChangePassword","setShowChangePassword","showLoading","setShowLoading","selectToken","showSuccessModal","setShowSuccessModal","showFailedModal","setShowFailedModal","handleChangePassword","response","disabled","defaultValue","Loading","Modal","typeIcon","text","onAgree"],"mappings":"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","file":"static/js/24.a8df61be.chunk.js","sourcesContent":["const { server_name, token_prefix } = require(\"namespace\");\n\nexport const updateTutorProfile = async ({newTutorInfo, token, id}) => {\n    try {\n        await fetch(`${server_name}/findTutor/tutorDetail/${id}`, {\n            method: \"PUT\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `${token_prefix} ${token}`,\n            },\n            body: JSON.stringify(newTutorInfo),\n        })\n        return true;\n    } catch (error) {\n        console.log(\"Failed to update tutor's profile: \", error);\n        return false;\n    }\n}\n\nexport const updateParentProfile = async ({newTutorInfo, token, id}) => {\n    try {\n        await fetch(`${server_name}/findTutor/parentDetail/${id}`, {\n            method: \"PUT\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `${token_prefix} ${token}`,\n            },\n            body: JSON.stringify(newTutorInfo),\n        })\n        return true;\n    } catch (error) {\n        console.log(\"Failed to update parent's profile: \", error);\n        return false;\n    }\n}\n\nexport const updateLink = async ({ token, newLink}) => {\n    try {\n        await fetch(`${server_name}/auth/updateMultipleLink/`, {\n            method: \"PUT\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `${token_prefix} ${token}`,\n            },\n            body: JSON.stringify(newLink),\n        })\n        return true;\n    } catch (error) {\n        console.log(\"Failed to update user's link: \", error);\n        return false;\n    }\n    \n} \n\nexport const getName = (name) => {\n    return {\n      first_name: name.slice(0, name.indexOf(' ')),\n      last_name: name.slice(name.indexOf(' ') + 1)\n    }\n}\n\nexport const changePassword = async ({token, oldPassword, newPassword}) => {\n    try {\n        await fetch(`${server_name}/auth/changePassword/`, {\n            method: \"PUT\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: `${token_prefix} ${token}`,\n            },\n            body: JSON.stringify({\n                \"old_password\": oldPassword,\n                \"new_password\": newPassword,\n            }),\n        })\n        return true;\n    } catch (error) {\n        console.log(\"Failed to change password: \", error);\n        return false;\n    }\n}\n","import React from 'react';\nimport { useRef } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { AiFillCloseCircle } from 'react-icons/ai';\nimport { RiLockPasswordFill } from 'react-icons/ri';\n\nChangePassword.propTypes = {\n    \n};\n\nfunction ChangePassword({onClose, onSubmit}) {\n    const {register, formState: { errors }, handleSubmit, watch} = useForm();\n    const newpassword = useRef({});\n    newpassword.current = watch(\"newpassword\", \"\");\n\n    const handleChangePassword = ({oldpassword, newpassword}) => {\n        if(!onSubmit) return;\n        onSubmit({\n            oldPassword: oldpassword,\n            newPassword: newpassword,\n        })\n    }\n    \n    return (\n        <div className=\"settings__password\">\n            <div className=\"settings__overlay\" onClick={() => onClose()}></div>\n                <form className=\"settings__password__main\" onSubmit={handleSubmit(handleChangePassword)}>\n                    <AiFillCloseCircle className=\"settings__close\" onClick={() => onClose()} />\n                    <label style={{fontWeight: 700}}>Đổi mật khẩu <RiLockPasswordFill /></label>\n                    <div style={{padding: \"12px 16px\"}}>\n                    <div className=\"settings__field\" style={{width: 240}}>\n                        <label>Mật khẩu cũ</label>\n                        <input type=\"password\" {...register(\"oldpassword\", { required: true, minLength: 6})}/>\n                        \n                        {errors.oldpassword && \n                            <span className=\"settings__field__error\">Mật khẩu cần ít nhất 6 kí tự</span>}    \n                    </div>\n                    <div className=\"settings__field\">\n                        <label>Mật khẩu mới</label>\n                        <input type=\"password\" {...register(\"newpassword\", { required: true, minLength: 6})}/>\n                        {errors.newpassword && \n                            <span className=\"settings__field__error\">Mật khẩu mới cần ít nhất 6 kí tự</span>}    \n                    </div>\n                    <div className=\"settings__field\">\n                        <label>Nhập lại mật khẩu</label>\n                        <input type=\"password\" \n                            {...register(\"renewpassword\", {\n                                validate: value =>\n                                value === newpassword.current || \"The passwords do not match\"\n                        })}\n                        />\n                        \n                        {errors.renewpassword && \n                            <span className=\"settings__field__error\">Mật khẩu không trùng khớp</span>}\n                    </div>\n                    <button type=\"submit\">Lưu</button>\n                    </div>\n                </form>\n        </div>\n    );\n}\n\nexport default ChangePassword;","import Loading from 'components/Loading/Loading';\nimport Modal from 'components/Modal/Modal';\nimport { selectEmail, selectToken, selectUsername } from 'features/auth/authSlice';\nimport React from 'react';\nimport { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { changePassword } from '../settings';\nimport ChangePassword from './ChangePassword';\n\nfunction SettingsAccount(props) {\n    const userName = useSelector(selectUsername);\n    const email = useSelector(selectEmail);\n    const [showChangePassword, setShowChangePassword] = useState(false);\n    const [showLoading, setShowLoading] = useState(false);\n    const token = useSelector(selectToken);\n    const [showSuccessModal, setShowSuccessModal] = useState(false);\n    const [showFailedModal, setShowFailedModal] = useState(false);\n\n    const handleChangePassword = async ({oldPassword, newPassword}) => {\n        setShowLoading(true);\n        const response = await changePassword({\n            token: token,\n            oldPassword: oldPassword,\n            newPassword: newPassword,\n        })\n        setShowLoading(false);\n        if(response) {\n            setShowSuccessModal(true);\n        } else {\n            setShowFailedModal(true);\n        }\n    }\n\n    return (\n        <div className=\"settings__account\">\n            <div className=\"settings__field\">\n                <label>Tên tài khoản</label>\n                <input type=\"text\" disabled defaultValue={userName}/>\n            </div>\n            <div className=\"settings__field\">\n                <label>Email</label>\n                <input type=\"text\" disabled defaultValue={email}/>\n            </div>\n            <div className=\"settings__field\">\n                <label>Mật khẩu</label>\n                <button onClick={() => setShowChangePassword(true)}>Đổi mật khẩu</button>\n            </div>\n            {showChangePassword && <ChangePassword onClose={()=>setShowChangePassword(false)} onSubmit={handleChangePassword}/>}\n            {showLoading && <Loading />}\n            {showSuccessModal && <Modal typeIcon=\"check\" text=\"Đổi mật khẩu thành công\" onAgree={() => {setShowChangePassword(false);setShowSuccessModal(false)}}/>}\n            {showFailedModal && <Modal typeIcon=\"fail\" text=\"Đổi mật khẩu không thành công\" onAgree={() => setShowFailedModal(false)} />}\n        </div>\n    );\n}\n\nexport default SettingsAccount;"],"sourceRoot":""}